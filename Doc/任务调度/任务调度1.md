很多地方都需要用到定时任务之类的功能，
虽然已经有了一套实现框架，但是还是想参考下外面的框架，看看有没有可取的地方：这里主要参考：xxl-job,qutaze


定时任务：谁在什么时间执行什么事情。这就什么到两个方面：调度和执行

# 一. 调度
* 基于时间触发

    延时任务，定时任务，周期任务。

    可以参考手机上的日程安排；可以考虑实现`cron`

    如间隔60秒。

    每(1)天18:00:00

    每(1)月1号18:00

    每(1)年1月1号18:00
* 基于事件触发

    如在某个任务执行之后触发；
    
    在收到某个消息队列发送的消息之后触发，跟时间无关，没有规律。


    调度应该是类似于web多机器部署：每个机器都执行自己的调度逻辑，多个调度程序独立执行。


# 二. 执行

执行的程序应该是可以单机部署，也可以集群部署的。

可以抽象成一个个执行单元:`node`,可以是同一个机器上不同进程，也可以是不同机器上的进程

但执行时需要考虑执行任务是否是有状态的:

如果无状态那可以随意部署多个并行执行，<br>
如果是有状态的，那就需要调度程序给不同的`node`传递不同的参数(?)

执行单元有主备和多主之分：

1. 主备即在同一组里的多个执行单元只有一个主执行单元执行，其余执行单元等待，对应着有状态的任务（如果有状态的都采用该种方式，也就执行上述给不同的node传递不同的参数了，因为只有一个程序生效，缺点是不可以水平扩展，某一时刻智能有一台机器在处理）

2. 多主则是多个执行单元一起工作，对应着无状态的任务
